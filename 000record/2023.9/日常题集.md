# Max to the Right of Min

## 题面翻译

现有一长度为 $n(n\leq 10^6)$ 的排列，求有多少子区间 $[l,r]$ 满足区间最大值出现在区间最小值的右侧。

## 题目描述

You are given a permutation $ p $ of length $ n $ — an array, consisting of integers from $ 1 $ to $ n $ , all distinct.

Let $ p_{l,r} $ denote a subarray — an array formed by writing down elements from index $ l $ to index $ r $ , inclusive.

Let $ \mathit{maxpos}_{l,r} $ denote the index of the maximum element on $ p_{l,r} $ . Similarly, let $ \mathit{minpos}_{l,r} $ denote the index of the minimum element on it.

Calculate the number of subarrays $ p_{l,r} $ such that $ \mathit{maxpos}_{l,r} > \mathit{minpos}_{l,r} $ .

## 输入格式

The first line contains a single integer $ n $ ( $ 1 \le n \le 10^6 $ ) — the number of elements in the permutation.

The second line contains $ n $ integers $ p_1, p_2, \dots, p_n $ ( $ 1 \le p_i \le n $ ). All $ p_i $ are distinct.

## 输出格式

Print a single integer — the number of subarrays $ p_{l,r} $ such that $ \mathit{maxpos}_{l,r} > \mathit{minpos}_{l,r} $ .

## 样例 #1

### 样例输入 #1

```
3
1 2 3
```

### 样例输出 #1

```
3
```

## 样例 #2

### 样例输入 #2

```
6
5 3 6 1 4 2
```

### 样例输出 #2

```
4
```

## 样例 #3

### 样例输入 #3

```
10
5 1 6 2 8 3 4 10 9 7
```

### 样例输出 #3

```
38
```
