## 字符串哈希板子：

```cpp
#define mp make_pair
typedef pair<int, int> hashv;
const ll mod1 = 1e9 + 7;
const ll mod2 = 1e9 + 9;

hashv operator + (hashv a, hashv b) {
    int c1 = a.fi + b.fi,c2 = a.se + b.se;
    if (c1 >= mod1) c1 -= mod1;
    if (c2 >= mod2) c2 -= mod2;
    return mp(c1, c2);
}

hashv operator - (hashv a, hashv b) {
    int c1 = a.fi - b.fi,c2 = a.se - b.se;
    if (c1 < 0) c1 += mod1;
    if (c2 < 0) c2 += mod2;
    return mp(c1, c2);
}
hashv operator * (hashv a, hashv b) {
    return mp(1ll * a.fi * b.fi % mod1, 1ll * a.se * b.se % mod2);
}
```



```cpp
class shash {
public:
	vector<ll> pres;
	vector<ll> epow;
	ll e , p;
	shash() {};
	shash(string& s , ll e , ll p) {
		int n = sz(s);
		this->e = e;
		this->p = p;
		pres = vector<ll>(n + 1);
		epow = vector<ll>(n + 1);
		epow[0] = 1;
		for (int i = 0; i < n; i++) {
			pres[i + 1] = (pres[i] * e + s[i]) % p;
			epow[i + 1] = epow[i] * e % p;

		}
	}
	ll operator()(int l , int r) {
		ll res = (pres[r + 1] - pres[l] * epow[r - l + 1] % p) % p;
		return (res + p) % p;
	}
};

class dhash {
public:
	int mod1 = 1E9 + 7;
	int mod2 = 1E9 + 9;
	array<shash , 2> Hash;
	string s;
	dhash() {};
	dhash(string s) {
		Hash = {shash(s , 1331 , mod1) , shash(s , 1221 , mod2)};
	}
	pair<ll , ll> operator()(int l , int r) {
		return {Hash[0](l , r) , Hash[1](l , r)};
	}
} ss , tt;
```



