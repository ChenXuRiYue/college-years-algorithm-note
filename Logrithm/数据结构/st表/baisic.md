## $ST表$

##### 简介

```txt
St表是一种维护区间信息的数据结构。
维护二元运算 f(a,a)=a;
           f(a...b...c,b...c...d)=f(a....d).
```

#### 实现关键。

1. 倍增的思想。
2. 动态规划，查表思想。
3. 区间重叠运算。



举例：

定义结构： f(i,k)表示区间$[i,i+2^{k}-1]$的最大值，最小值。

显然最小规模的子问题就是 f(i,0)=a[i]

状态转移方程为。

f(i,k)=max( f( i , k-1 ) , f( i+$2^{k-1}$ , k-1 ) )。



#### 使用问题

给定一个区间$[l,r]$,查询该区间上的最大值。

显然并不总是刚好有一个区间套在区间上。

##### 最精妙的地方之一：

- 根据这种max运算的本质（含幺的）：允许这个区间分成两份，不必追求没有一点交集。
- ![](%E5%8E%9F%E7%90%86%E8%AF%81%E6%98%8E.png)

使用两个指标函数，计算迁移到当前区间即可。

#### 复杂度计算

##### 时间上

主要是预处理st表上。

枚举倍增的长度。枚举起点一共是$n*log(n)$.

##### 空间上

区间长度一般最大是1e7。

f\[n][25]于是绰绰有余。最长的管理区间长度是$2^{24}$，16 ，777 ，216。

长度的枚举边界是log2(n);

#### 一些小小的优化角度：

第一点，保存各种长度的log取整的结果。倍增思想上总是要用到log2（i）这样一个计算。可以及时算，也可以先打表保存。、

log2(1)=0;

log2(2)=log(2/2)+1=1;

log2(3)=log(3/2)+1

---(取整)-->log(1)+1;k.5丢掉0.5肯定还在同一个数域范围之内。f( log(k.5) )=f( log(k) )
